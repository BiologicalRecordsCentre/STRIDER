<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Simulating the STate, effoRt, Identification/DEtection and Reporting of Biodiversity Data • STRIDER</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Simulating the STate, effoRt, Identification/DEtection and Reporting of Biodiversity Data">
<meta name="description" content="An R package to simulate biodiversity data for testing model performance">
<meta property="og:description" content="An R package to simulate biodiversity data for testing model performance">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">STRIDER</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/custom_functions.html">Use-case: Investigating the Impact of Sampling Co-location</a></li>
    <li><a class="dropdown-item" href="articles/example_minimal.html">A minimal example</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="strider-state-effort-identificationdetection-reporting">STRIDER (STate, effoRt, Identification/DEtection, Reporting)<a class="anchor" aria-label="anchor" href="#strider-state-effort-identificationdetection-reporting"></a>
</h1></div>
<p><a href="https://github.com/BiologicalRecordsCentre/STRIDER/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/BiologicalRecordsCentre/STRIDER/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></p>
<div class="section level2">
<h2 id="what-is-strider">What is STRIDER?<a class="anchor" aria-label="anchor" href="#what-is-strider"></a>
</h2>
<p>STRIDER is an R package for facilitating the simulation of virtual species and the subsequent sampling and reporting. Its development is motivated by the need to simulate citizen science data, alongside other biodiversity data sampling, to validate method development. The language is intentionally generic so uses terms such as ‘target’ to mean species, organisms or similar. The simulation is split into a series processes:</p>
<ul>
<li>State: what is the state of the simulated reality?
<ul>
<li>Environment (e.g abiotic and biotic)</li>
<li>Target (e.g. species) suitability as a function of the environment</li>
<li>Target realised state as a function of the target suitability</li>
</ul>
</li>
<li>Effort: how is sampling effort allocated? (where/what/when are they sampling? Who/what is doing the sampling?)</li>
<li>Identification/Detection: what happens when a sampler encounters the target (is the species detected? is the species correctly identified?)</li>
<li>Reporting: how is the interaction reported? (is the species recorded? Are absences recorded? At what spatial resolution is it reported at?)</li>
</ul>
<p><img src="reference/figures/overview.drawio.svg"></p>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>STRIDER provides a reproducible basis for all your simulation needs. There are 3 key components.</p>
<p>Firstly, it provides a <code>SimulationObject</code> class with slots for each object describing each stage of the simulation workflow. This keeps everything in one R object that can be</p>
<p>Secondly, STRIDER provides a series of functions to build up your simulation object. This includes both straightforward functions for common simulation approaches and the ability to bring your own data/functions.</p>
<p>Thirdly, STRIDER will provide (in due course) example workflows that can be adapted and extended your to kick start your simulation work.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from GitHub</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"BiologicalRecordsCentre/STRIDER"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="requirements">Requirements<a class="anchor" aria-label="anchor" href="#requirements"></a>
</h2>
<p><code>terra</code>, <code>sf</code></p>
<p><code>targets</code> is recommended for the pipeline/workflow management</p>
</div>
<div class="section level2">
<h2 id="how-to-use-the-r-package">How to use the R package<a class="anchor" aria-label="anchor" href="#how-to-use-the-r-package"></a>
</h2>
<p>For each of the 5 processes, there are choices of functions to use depending on your needs. For each process, there is the most basic version for demonstration purposes.</p>
<p>The functions all follow this basic schema whereby all the objects from the previous stage, along with the <code>background</code> object, are combined into a single <code>simulation_object</code>. This object is then used as an argument in the subsequent functions, whether or not they are actually used in the calculations within the function.</p>
<p>The <code>simulation_object</code> includes the following components:</p>
<ul>
<li>
<code>@background</code>: Background extent and resolution of the simulated reality</li>
<li>
<code>@state_env</code>: Simulated state of the environment</li>
<li>
<code>@state_target_suitability</code>: Simulated state of the target (as environmental suitability)</li>
<li>
<code>@state_target_realised</code>: Simulated state of the target (as a realised absolute/binary value)</li>
<li>
<code>@effort</code>: Simulated sampling effort</li>
<li>
<code>@detect</code>: Simulated detection information</li>
<li>
<code>@report</code>: Simulated reporting information</li>
</ul>
<p>You can access and manipulate the <code>simulation_object</code> at each step to generate the outputs of the corresponding processes. The outputs at each step are <code>terra</code> SpatRasters or <code>sf</code> feature collections (POINT), as shown in the figure above. You can use custom R scripts to generate the outputs of any of the steps, ensuring flexibility and interoperability.</p>
<p>The functions used at each stage are as follows:</p>
<ul>
<li><code>sim_state_env(simulation_object, ...)</code></li>
<li><code>sim_state_target_suitability(simulation_object, ...)</code></li>
<li><code>sim_state_target_realise(simulation_object, ...)</code></li>
<li><code>sim_effort(simulation_object, ...)</code></li>
<li><code>sim_detect(simulation_object, ...)</code></li>
<li><code>sim_report(simulation_object, ...)</code></li>
</ul>
<p>You could use the <code>targets</code> R package to create reproducible workflows for simulating your data.</p>
</div>
<div class="section level2">
<h2 id="simulating-state">Simulating state<a class="anchor" aria-label="anchor" href="#simulating-state"></a>
</h2>
<p>The term “state” refers to the underlying true conditions of the environment and the target.</p>
<p>Environmental State: This refers to the simulated state of the environment, which can include various abiotic and biotic factors, such as temperature, humidity, terrain features, vegetation, or any other relevant ecological parameters. Simulating the environmental state facilitates understanding of how different environmental conditions may influence the presence or behaviour of the target species.</p>
<p>Target State: This represents the simulated distribution of the target within the environment. The target is often influenced by the environmental state. In STRIDER the target is represented in two forms: a continuous variable representing a probability of occurrence (slot <code>@state_target_suitability</code>), and a realised absolute value (slot <code>@state_target_realised</code>) which could contain a binary (0 or 1) representing species occupancy or a positive integer representing abundance.</p>
<p>In current form STRIDER represents states as being grid-based and relies on a consistent grid resolution/extent across all state variables. States are represented as rasters (<code>SpatRaster</code>) with any resolution, extent or CRS (or no CRS). We simulate the state of the environment and target separately. The simulation object uses a SpatRaster in slot <code>@background</code>. The resolution, extent and CRS is inherited from the background when simulating states.</p>
<p>In future developments we will consider using point process models describe the target state with slot <code>@state_target</code> capturing the intensity surface and <code>@state_target_realised</code> capturing the realised points.</p>
<div class="section level3">
<h3 id="defining-the-background">Defining the background<a class="anchor" aria-label="anchor" href="#defining-the-background"></a>
</h3>
<p>The background is simply a SpatRaster from which the CRS/extent/resolution will be used for subsequent simulation steps. Here we create a background using a 30x30 matrix then create a simulation object from it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create the background</span></span>
<span><span class="va">background</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the simulation object</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu">SimulationObject</span><span class="op">(</span>background <span class="op">=</span> <span class="va">background</span><span class="op">)</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_state_env.html">sim_state_env</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="va">state_env_gradient</span>,from <span class="op">=</span> <span class="fl">0</span>,to <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">sim_obj</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="do">## An object of class "SimulationObject"</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="do">## Slot "background":</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="do">## dimensions  : 30, 30, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="do">## resolution  : 1, 1  (x, y)</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="do">## extent      : 0, 30, 0, 30  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="do">## coord. ref. :  </span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="do">## source(s)   : memory</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="do">## name        : lyr.1 </span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="do">## min value   :     0 </span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="do">## max value   :     0 </span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="do">## Slot "state_env":</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="do">## dimensions  : 30, 30, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="do">## resolution  : 1, 1  (x, y)</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="do">## extent      : 0, 30, 0, 30  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="do">## coord. ref. :  </span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="do">## source(s)   : memory</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="do">## name        : env </span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="do">## min value   :   0 </span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="do">## max value   :   1 </span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="do">## Slot "state_target_suitability":</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="do">## Slot "state_target_realised":</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="do">## Slot "effort":</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a><span class="do">## Slot "detect":</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a><span class="do">## Slot "report":</span></span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a><span class="do">## NULL</span></span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a><span class="do">## Slot "metadata":</span></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="do">## $state_env</span></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a><span class="do">## $state_env$fun</span></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a><span class="do">## state_env_gradient</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="do">## $state_env$from</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="do">## [1] 0</span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="do">## $state_env$to</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a><span class="do">## Slot "hash":</span></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a><span class="do">## [1] "841156773684e37801aefddb92881877"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simulating-the-environmental-state">Simulating the environmental state<a class="anchor" aria-label="anchor" href="#simulating-the-environmental-state"></a>
</h3>
<p>Here we want to represent the state of the environment. Essentially we need to capture variables (real or abstract) which influence where the target might exist, and where the effort might be allocated. This might include:</p>
<ul>
<li>Physical features like altitude or slope</li>
<li>Climatic variable such as rainfall or temperature</li>
<li>Effort-impacting variables such as human population, focal points (e.g. nature reserves) or access features (footpaths).</li>
</ul>
<p>The output of this stage is a SpatRaster with layers for each environmental variable. There is currently no way to capture non-gridded spatial features such as lines or polygons but you could derive grid-based approximations of it. This works well for time invariant environmental variables. If you need time variant environmental variables then the best current implementation is to create a simulation object for each time step, sample from each time step, sample from each time step, then aggregate later.</p>
<p>The function for simulating environmental state is <code>sim_state_env</code></p>
<p>The minimal version of this function is <code>sim_state_env(fun="uniform")</code> which produces a simulation object with a single layer which is uniform in value in space.</p>
<p>The BYOD (Bring Your Own Data) function is <code>sim_state_env(spatraster = [your_raster])</code> where you can provide a SpatRaster with custom environmental state that meets you needs and it will be added to the correct slot.</p>
</div>
<div class="section level3">
<h3 id="simulating-the-target-state">Simulating the target state<a class="anchor" aria-label="anchor" href="#simulating-the-target-state"></a>
</h3>
<p>Here we define the state of the target or targets. We define two versions of this: a continuous variable representing a probability of occurrence (slot <code>@state_target</code>), and a realised absolute value (slot <code>@state_target_realised</code>) which could contain a binary (0 or 1) representing species occupancy or a positive integer representing abundance. Here’s an example:</p>
<p><img src="reference/figures/realisation_diagram-1.png"><!-- --><img src="reference/figures/realisation_diagram-2.png"><!-- --><img src="reference/figures/realisation_diagram-3.png"><!-- --></p>
<p>Both of these representations of state are represented in the simulation object as SpatRaster with layers for each target. Again, if you want the target to change over time then create a list of rasters where each list item represents the target state at each time step, but this will need some wrangling.</p>
<p>The function for simulating target state is <code>sim_state_target_suitability</code></p>
<p>The minimal version of this function is <code>sim_state_target_suitability(fun="uniform")</code> which produces a uniform abundance across space.</p>
<p>The BYOD function is <code>sim_state_target(fun=[your custom functio])</code> meaning you could also use other packages to generate a target state (eg.rangeshiftR, virtualspecies) then convert the output to a <code>SpatRaster</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulating-effort">Simulating effort<a class="anchor" aria-label="anchor" href="#simulating-effort"></a>
</h2>
<p>In the context of STRIDER, “effort” refers to the representation of sampling activities, encompassing the allocation and execution of various sampling procedures across a defined landscape or study area.</p>
<p>Several factors could potentially predict the allocation and execution of sampling efforts, including but not limited to:</p>
<ul>
<li>Accessibility: Proximity to human infrastructure, trails, or road networks might influence where sampling efforts are concentrated.</li>
<li>Environmental conditions: Factors such as topography, habitat type, and climate could affect the selection of sampling sites.</li>
<li>Species-specific considerations: The presence of specific target species or their preferred habitats could influence where sampling efforts are directed.</li>
</ul>
<p>Functionally, effort in STRIDER currently describes:</p>
<ul>
<li>Who (or what) is did the sampling?</li>
<li>Where did the samplers visit to do sampling?</li>
<li>When did the sampling happen? (this is captured implicitly)</li>
</ul>
<p>There are many ways to simulate effort from sampling points based on cell weights, to agent based models, to manually setting specific locations for sampling therefore STRIDER only facilitates representing effort as the realisation of sampling procedures. If you want to capture information about probabilities of locations being sampled then either have a non-slotted SpatRaster, or capture this information in the environmental state.</p>
<p>The slot for effort is <code>@effort</code> and contains a sf spatial data frame with the following columns:</p>
<ul>
<li>
<code>sampler</code> - who (or what)</li>
<li>
<code>visit</code> - the identifier for each visit by a sampler</li>
<li>
<code>unit</code> - the identifier for each sampling unit within a visit</li>
<li>
<code>cell_id</code> - where</li>
<li>
<code>geometry</code> - where</li>
</ul>
<p>Here’s a very basic example where we generate effort comprising of two samplers, each making one visit, and within each visit they use two sampling units (meaning they had two opportunities to observe each target present).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate the sampling effort</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_effort.html">sim_effort</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="st">"basic"</span>, n_samplers<span class="op">=</span><span class="fl">2</span>, n_visits <span class="op">=</span> <span class="fl">1</span>, n_sample_units <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">sim_obj</span><span class="op">@</span><span class="va">effort</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="do">## Simple feature collection with 4 features and 9 fields</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">## Geometry type: POINT</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">## Dimension:     XY</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">## Bounding box:  xmin: 16.5 ymin: 7.5 xmax: 19.5 ymax: 15.5</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="do">## CRS:           NA</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="do">##   sampler visit unit cell_id ID       env target target_suitability</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="do">## 1       1     1    1     437  1 0.5517241    env          0.8965517</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="do">## 2       1     1    2     437  2 0.5517241    env          0.8965517</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="do">## 3       2     1    1     680  3 0.6551724    env          0.6896552</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="do">## 4       2     1    2     680  4 0.6551724    env          0.6896552</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="do">##   target_realised          geometry</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="do">## 1               1 POINT (16.5 15.5)</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="do">## 2               1 POINT (16.5 15.5)</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="do">## 3               1  POINT (19.5 7.5)</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="do">## 4               1  POINT (19.5 7.5)</span></span></code></pre></div>
<p>The function for simulating effort start is <code>sim_effort</code></p>
<p>The minimal function for this process is <code>sim_effort(fun="uniform")</code> in which effort is uniformly distributed across the landscape.</p>
<!--`sim_effort_weighted()` can be used to sample from the target state but weighted unequally across the environment (a weighting layer is provided as a SpatRaster)-->
<!--`sim_effort_byod()` can be used to bring your own data and sample but using specified locations-->
</div>
<div class="section level2">
<h2 id="simulating-identificationdetection">Simulating identification/detection<a class="anchor" aria-label="anchor" href="#simulating-identificationdetection"></a>
</h2>
<p>In STRIDER, “detection” refers to the process of whether the applied effort identifies and records the presence of a target within the specified visit. It describes the interaction between realised target state and effort, but may also be influenced by environmental state. Detection can be influenced by various factors such as the sampling methodology, the proficiency of the observer, the environmental conditions, and the characteristics of the target species.</p>
<p>Given detection, “identification” refers to the accurate recognition and categorization of a species during the data collection process. This step involves correctly identifying the observed organism to the appropriate taxonomic group or species. Samplers may not always identify a target correctly and these functions may take confusion matrices.</p>
<p>The minimal function for this process is <code>sim_detect(fun="equal")</code> in which all targets are detected at equal probability.</p>
</div>
<div class="section level2">
<h2 id="simulating-the-reporting">Simulating the reporting<a class="anchor" aria-label="anchor" href="#simulating-the-reporting"></a>
</h2>
<p>The reporting phase in STRIDER is designed to simulate various reporting scenarios, considering factors such as reporting probabilities, data resolution, and recording platforms, among others.</p>
<p>Data may not be reported exactly as the sampler experienced it, for example:</p>
<ul>
<li>Aggregating the detections across multiple sampling units into the species observed across in one visit.</li>
<li>Aggregating to a coarser spatial resolution</li>
<li>Only interesting or novel species are reported (eg. as a result of life listing)</li>
</ul>
<p>The minimal function for this process is <code>sim_report(fun="equal")</code> in which all data is reported at equal probability.</p>
</div>
<div class="section level2">
<h2 id="custom-functions">Custom functions<a class="anchor" aria-label="anchor" href="#custom-functions"></a>
</h2>
<p>For each simulation stage you can provide your own function to simulate that process. If there are different parameters that you want to provide to these functions you can pass them as other named arguments to the function. For example if I want to use a custom function to produce a environmental suitability layer for a target, based on the environment I could do define the following function <code>suit_fun()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">suit_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">target_suitability</span> <span class="op">&lt;-</span> <span class="va">sim_obj</span><span class="op">@</span><span class="va">background</span> <span class="co"># use the background to </span></span>
<span>  <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">target_suitability</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0.2</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">target_suitability</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"frog"</span> <span class="co">#give my layer a name</span></span>
<span></span>
<span>  <span class="co"># set suitability under certain critera eg. 0.7 when rainfall&gt;500 and altitude &lt; 50</span></span>
<span>  <span class="va">target_suitability</span><span class="op">[[</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">rainfall</span><span class="op">&gt;</span><span class="fl">500</span> <span class="op">&amp;</span> <span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">altitude</span><span class="op">&lt;</span><span class="fl">50</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.4</span></span>
<span>  <span class="va">target_suitability</span><span class="op">[</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">rainfall</span><span class="op">&gt;</span><span class="fl">800</span> <span class="op">&amp;</span> <span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">altitude</span><span class="op">&lt;</span><span class="fl">40</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.9</span></span>
<span></span>
<span>  <span class="va">target_suitability</span> <span class="co">#return just the suitability layer</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_state_target_suitability.html">sim_state_target_suitability</a></span><span class="op">(</span><span class="va">sim_obj</span>, fun <span class="op">=</span> <span class="va">suit_fun</span><span class="op">)</span></span></code></pre></div>
<p>This function must take the SimulationObject as its first argument. This means you’ve got access to all other simulation components. Therefore, if for example you wanted to your detection process to depend on the environment then you’d simply need to access it via the correct slot.</p>
</div>
<div class="section level2">
<h2 id="a-complete-minimal-example">A complete minimal example<a class="anchor" aria-label="anchor" href="#a-complete-minimal-example"></a>
</h2>
<p>Here is an example which runs through a very simple example and plots the output.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://biologicalrecordscentre.github.io/STRIDER/">STRIDER</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the background</span></span>
<span><span class="va">background</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span>,<span class="fl">50</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the simulation object</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu">SimulationObject</span><span class="op">(</span>background <span class="op">=</span> <span class="va">background</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate the environment state</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_state_env.html">sim_state_env</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="va">state_env_gradient</span>,from <span class="op">=</span> <span class="fl">0</span>,to <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate the target state</span></span>
<span><span class="va">state_target_suitability_example</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span><span class="op">{</span> </span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span>  <span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">*</span><span class="fl">2</span></span>
<span>  <span class="va">out</span><span class="op">[</span><span class="va">out</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">-</span><span class="va">out</span><span class="op">[</span><span class="va">out</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">out</span> <span class="co"># optimal environment is 0.5</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_state_target_suitability.html">sim_state_target_suitability</a></span><span class="op">(</span><span class="va">sim_obj</span>,<span class="va">state_target_suitability_example</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#realise the state</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_state_target_realise.html">sim_state_target_realise</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate the sampling effort</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_effort.html">sim_effort</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="st">"basic"</span>, n_visits <span class="op">=</span> <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate the detection</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_detect.html">sim_detect</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="st">"equal"</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate the reporting</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_report.html">sim_report</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="st">"equal"</span>, prob <span class="op">=</span> <span class="fl">0.8</span>, platform <span class="op">=</span> <span class="st">"iRecord"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span> </span></code></pre></div>
<p><img src="reference/figures/example-1.png"><!-- --><img src="reference/figures/example-2.png"><!-- --><img src="reference/figures/example-3.png"><!-- --><img src="reference/figures/example-4.png"><!-- --><img src="reference/figures/example-5.png"><!-- --><img src="reference/figures/example-6.png"><!-- --></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>TBC</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing STRIDER</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Simon Rolph <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Rolph.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
