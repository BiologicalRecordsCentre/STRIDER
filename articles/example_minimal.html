<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A minimal example • STRIDER</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A minimal example">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">STRIDER</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/example_minimal.html">A minimal example</a></li>
    <li><a class="dropdown-item" href="../articles/use_case_colocation.html">Use-case: Investigating the Impact of Sampling Co-location</a></li>
    <li><a class="dropdown-item" href="../articles/use_case_integration.html">Use-case: Data Integration</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A minimal example</h1>
            
      

      <div class="d-none name"><code>example_minimal.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-and-set-up">Introduction and set up<a class="anchor" aria-label="anchor" href="#introduction-and-set-up"></a>
</h2>
<p>In this vignette, we provide a minimal example to demonstrate how
different sampling methods impact species distribution modelling using
the STRIDER package. We will walk through the entire process, from
creating a simulation object to visualizing the results.</p>
<p>Here we set up by loading the required packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># everything you need for STRIDER</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://biologicalrecordscentre.github.io/STRIDER/">STRIDER</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.78</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="co">#for general data wrangling and visualistion</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:terra':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, union</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#for model vaidation</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/" class="external-link">caret</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: lattice</span></span>
<span></span>
<span><span class="co">#set a seed so it's reproducible</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simulating-data">Simulating data<a class="anchor" aria-label="anchor" href="#simulating-data"></a>
</h2>
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>The background serves as a spatial template, providing the coordinate
reference system (CRS) (if needed), extent, and resolution for the
subsequent simulation steps. Here, we create a simple background raster
with dimensions 500x500.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dim_x</span> <span class="op">&lt;-</span> <span class="fl">500</span></span>
<span><span class="va">dim_y</span> <span class="op">&lt;-</span> <span class="fl">500</span></span>
<span><span class="va">background</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">dim_x</span>,<span class="va">dim_y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimulationObject.html">SimulationObject</a></span><span class="op">(</span>background <span class="op">=</span> <span class="va">background</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="environmental-state">Environmental state<a class="anchor" aria-label="anchor" href="#environmental-state"></a>
</h3>
<p>To represent the state of the environment, we need to capture
variables (real or abstract) that influence where the target species
might exist. In this example, we define three environmental
variables:</p>
<p>Here we define three variables:</p>
<ul>
<li>Rainfall (ecological niche)</li>
<li>Temperature (ecological niche)</li>
<li>Urban density (factor affecting effort)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define an environmental state with two variables, env1 and env2 which create gradients perpendicular</span></span>
<span><span class="va">env1</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="va">dim_x</span><span class="op">)</span>,times <span class="op">=</span> <span class="va">dim_y</span><span class="op">)</span>,<span class="va">dim_x</span>,<span class="va">dim_y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env1</span> <span class="op">&lt;-</span> <span class="va">env1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">env1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env2</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="va">dim_x</span><span class="op">)</span>,times <span class="op">=</span> <span class="va">dim_y</span><span class="op">)</span>,<span class="va">dim_x</span>,<span class="va">dim_y</span>,byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env2</span> <span class="op">&lt;-</span> <span class="va">env2</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">env2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env3</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="va">dim_x</span><span class="op">)</span>,times <span class="op">=</span> <span class="va">dim_y</span><span class="op">)</span>,<span class="va">dim_x</span>,<span class="va">dim_y</span>,byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env3</span> <span class="op">&lt;-</span> <span class="va">env3</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">env3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">env1</span>,<span class="va">env2</span>,<span class="va">env3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rainfall"</span>,<span class="st">"temperature"</span>,<span class="st">"urban_density"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_minimal_files/figure-html/environmental%20state-1.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#slot it into the simulation object</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_state_env.html">sim_state_env</a></span><span class="op">(</span><span class="va">sim_obj</span>,spatraster <span class="op">=</span> <span class="va">env</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="target-state">Target state<a class="anchor" aria-label="anchor" href="#target-state"></a>
</h3>
<p>We simulate the presence of the target species based on the
environmental variables. The suitability_function is a custom function
designed to transform environmental variables into a measure of habitat
suitability for the target species. This function is crucial in
ecological modeling, where we aim to understand how different
environmental factors influence the presence or absence of a
species.</p>
<p>In this example, the suitability is determined by averaging the
rainfall and temperature values. This is a basic approach and assumes
that both factors equally influence habitat suitability. In practice,
you might have a more complex model where different environmental
variables have different weights or non-linear effects on
suitability.</p>
<p>The suitability function is used to generate a spatial layer that
represents the habitat suitability for the target species based on the
environmental conditions. This layer is then used in subsequent steps
to:</p>
<ul>
<li>Simulate Target Presence: Determine where the target species is
likely to be present.</li>
<li>Realise the Target State: Generate a binary presence/absence or
abundance map based on the suitability values.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define a function to turn the environment into suitability</span></span>
<span><span class="va">suitabiity_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">rainfall</span>,<span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">temperature</span><span class="op">)</span></span>
<span>  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"target"</span></span>
<span>  <span class="va">out</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#apply function</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_state_target_suitability.html">sim_state_target_suitability</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun <span class="op">=</span> <span class="va">suitabiity_function</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#realise</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_state_target_realise.html">sim_state_target_realise</a></span><span class="op">(</span><span class="va">sim_obj</span>,fun<span class="op">=</span><span class="va">state_target_realise_binomial</span><span class="op">)</span></span></code></pre></div>
<p>The suitability_function provided in this vignette is a simple
example. In real-world applications, you might use more sophisticated
models that incorporate multiple environmental variables and their
interactions. The STRIDER package allows you to define and apply such
custom suitability functions, making it a flexible tool for ecological
modeling and simulation.</p>
</div>
<div class="section level3">
<h3 id="effort">Effort<a class="anchor" aria-label="anchor" href="#effort"></a>
</h3>
<p>We simulate the effort of sampling, which is biased by urban density.
The sim_effort function is used to simulate sampling effort in the study
area. This step is crucial for understanding how sampling effort is
distributed and how it might bias the observed data.</p>
<p>Here are a description of the arguments provided:</p>
<ul>
<li>
<code>sim_obj</code>: The simulation object containing the
environmental state and other relevant data.</li>
<li>
<code>fun = "basic"</code>: Specifies that the “basic” effort
simulation function is used.</li>
<li>
<code>n_samplers = 500</code>: Indicates that 500 samplers are
used.</li>
<li>
<code>n_visits = 1</code>: Each sampler makes 1 visit.</li>
<li>
<code>n_sample_units = 1</code>: Each visit samples 1 unit.</li>
<li>
<code>prob_raster = sim_obj@state_env$urban_density</code>: The
probability raster is derived from the urban_density layer in the
environmental state. This biases the sampling effort towards areas with
higher urban density.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># alternative method of defining effort: add custom points</span></span>
<span><span class="co"># points_sf &lt;- st_as_sf(data.frame(x = c(20,40,60),y = c(20,40,60)),coords = c("x", "y"))</span></span>
<span><span class="co"># sim_obj &lt;- sim_effort(sim_obj,</span></span>
<span><span class="co">#                       sf = points_sf)</span></span>
<span></span>
<span><span class="co">#simulate effort, biased by urban density</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_effort.html">sim_effort</a></span><span class="op">(</span><span class="va">sim_obj</span>,</span>
<span>                      fun <span class="op">=</span> <span class="va">effort_basic</span>, </span>
<span>                      n_samplers<span class="op">=</span><span class="fl">500</span>, </span>
<span>                      n_visits <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                      n_sample_units <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                      prob_raster <span class="op">=</span> <span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span><span class="op">$</span><span class="va">urban_density</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="detection">Detection<a class="anchor" aria-label="anchor" href="#detection"></a>
</h3>
<p>Simulate detection of the target species with a 100% detection
probability.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#detection 100%</span></span>
<span><span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_detect.html">sim_detect</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-simulation-object">Plot simulation object<a class="anchor" aria-label="anchor" href="#plot-simulation-object"></a>
</h3>
<p>Finally, we visualize the components of the simulation object using
the custom <code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#visualise the simulation object's components</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_minimal_files/figure-html/plot_sim_obj-1.png" width="700"><img src="example_minimal_files/figure-html/plot_sim_obj-2.png" width="700"><img src="example_minimal_files/figure-html/plot_sim_obj-3.png" width="700"><img src="example_minimal_files/figure-html/plot_sim_obj-4.png" width="700"><img src="example_minimal_files/figure-html/plot_sim_obj-5.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="statistical-analysis">Statistical analysis<a class="anchor" aria-label="anchor" href="#statistical-analysis"></a>
</h2>
<p>Make a “biological recording” dataset with presence-only dataset
(<code>po</code>) and a presence-absence dataset (<code>pa</code>)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/export_df.html">export_df</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">)</span></span>
<span><span class="va">data_pa</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="co">#presence absense</span></span>
<span><span class="va">data_po</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">target_detected</span><span class="op">==</span><span class="fl">1</span>,<span class="op">]</span> <span class="co">#presense only</span></span></code></pre></div>
<p>Generate some background samples to aid model fitting</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">po_background</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/effort_basic.html">effort_basic</a></span><span class="op">(</span><span class="va">sim_obj</span>,<span class="fl">100</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">extract</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span>,xy<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>target_detected<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_po</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">data_po</span>,<span class="va">po_background</span><span class="op">)</span></span></code></pre></div>
<p>Combine dataset and fit models</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_mod</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">target_detected</span><span class="op">~</span><span class="va">rainfall</span> <span class="op">+</span> <span class="va">temperature</span>, data <span class="op">=</span> <span class="va">df</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">threshold</span> <span class="op">=</span> <span class="fl">0.5</span></span>
<span></span>
<span><span class="co"># fit model to presence only data with background samples</span></span>
<span><span class="va">mod_po</span> <span class="op">&lt;-</span> <span class="fu">fit_mod</span><span class="op">(</span><span class="va">data_po</span><span class="op">)</span></span>
<span><span class="va">mod_po_predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span>,<span class="va">mod_po</span>,type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#Compare it to presence/absence data</span></span>
<span><span class="va">mod_pa</span> <span class="op">&lt;-</span> <span class="fu">fit_mod</span><span class="op">(</span><span class="va">data_pa</span><span class="op">)</span></span>
<span><span class="va">mod_pa_predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">sim_obj</span><span class="op">@</span><span class="va">state_env</span>,<span class="va">mod_pa</span>,type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-simulation-workflow">A simulation workflow<a class="anchor" aria-label="anchor" href="#a-simulation-workflow"></a>
</h2>
<p>In this section, we will run multiple simulations to investigate the
impact of different sampling methods on model performance. We will use
predefined objects and a new function to adjust sampling weight rasters.
By chaining together various steps of the simulation pipeline, we can
systematically alter the factors of interest, such as sampling bias
strength and the number of samplers, to study their effects on the
results.</p>
<div class="section level3">
<h3 id="predefined-objects">Predefined Objects<a class="anchor" aria-label="anchor" href="#predefined-objects"></a>
</h3>
<p>We start with the predefined objects: background, env, and
suitability_function. These objects were defined in the earlier sections
of this vignette.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#use pre-defined objects</span></span>
<span><span class="va">background</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 500, 500, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 0, 500, 0, 500  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   :     0 </span></span>
<span><span class="co">#&gt; max value   :     0</span></span>
<span><span class="va">env</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 500, 500, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 0, 500, 0, 500  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; names       : rainfall, temperature, urban_density </span></span>
<span><span class="co">#&gt; min values  :    0.002,       0.002,         0.002 </span></span>
<span><span class="co">#&gt; max values  :    1.000,       1.000,         1.000</span></span>
<span><span class="va">suitabiity_function</span></span>
<span><span class="co">#&gt; function(sim_obj){</span></span>
<span><span class="co">#&gt;   out &lt;- c(sim_obj@state_env$rainfall,sim_obj@state_env$temperature)</span></span>
<span><span class="co">#&gt;   out &lt;- mean(out)</span></span>
<span><span class="co">#&gt;   names(out) &lt;- "target"</span></span>
<span><span class="co">#&gt;   out</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjusting-sampling-weight-raster">Adjusting Sampling Weight Raster<a class="anchor" aria-label="anchor" href="#adjusting-sampling-weight-raster"></a>
</h3>
<p>We define a function, adjust_towards_average, which adjusts the
sampling weight raster based on a given proportion. This function takes
the urban_density layer from the environmental state and modifies its
values to create varying levels of sampling bias:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#define a new function to adjust the sampling weight raster, takes values 0 to 1</span></span>
<span><span class="va">adjust_towards_average</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">proportion</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/values.html" class="external-link">values</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">adjusted</span> <span class="op">&lt;-</span> <span class="va">avg</span> <span class="op">+</span> <span class="va">proportion</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">avg</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">adjusted</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-simulations">Running Simulations<a class="anchor" aria-label="anchor" href="#running-simulations"></a>
</h3>
<p>Next, we define the main simulation function, run_simulation, which
incorporates the entire simulation pipeline. This function accepts three
arguments: rep (the repetition number), sampling_bias_strength (the
strength of the sampling bias), and n_samplers (the number of samplers).
The function performs the following steps:</p>
<ol style="list-style-type: decimal">
<li>Adjust Sampling Weight: Modify the urban_density raster based on the
specified sampling_bias_strength.</li>
<li>Simulate Sampling: Create a new SimulationObject and apply the
simulation steps: defining the environmental state, simulating target
suitability and realization, simulating sampling effort with the
adjusted sampling weight, detecting, and reporting.</li>
<li>Fit Model: Fit a generalized linear model (GLM) to the sampled
data.</li>
<li>Generate Test Set: Create an independent test set by simulating
additional sampling effort.</li>
<li>Predict on Test Set: Make predictions on the test set using the
fitted model.</li>
<li>Compute Metrics: Calculate performance metrics, including accuracy,
precision, recall, and F1 score, based on the confusion matrix.</li>
<li>Return Results: Output the results as a data frame.</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Here we define a function which has the full simulation pipeline chained together but with the arguments you wish to change as function arguments</span></span>
<span><span class="co"># Here my factors I'm interested in are the sampling bias strength and the number of samplers</span></span>
<span><span class="va">run_simulation</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rep</span>,<span class="va">sampling_bias_strength</span>, <span class="va">n_samplers</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">sampling_weight</span> <span class="op">&lt;-</span> <span class="fu">adjust_towards_average</span><span class="op">(</span><span class="va">env</span><span class="op">$</span><span class="va">urban_density</span>,<span class="va">sampling_bias_strength</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#simulate sampling</span></span>
<span>  <span class="va">sim_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimulationObject.html">SimulationObject</a></span><span class="op">(</span>background <span class="op">=</span> <span class="va">background</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/sim_state_env.html">sim_state_env</a></span><span class="op">(</span>spatraster <span class="op">=</span> <span class="va">env</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/sim_state_target_suitability.html">sim_state_target_suitability</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">suitabiity_function</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/sim_state_target_realise.html">sim_state_target_realise</a></span><span class="op">(</span>fun<span class="op">=</span><span class="va">state_target_realise_binomial</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/sim_effort.html">sim_effort</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">effort_basic</span>, </span>
<span>               n_samplers<span class="op">=</span><span class="va">n_samplers</span>, </span>
<span>               n_visits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               n_sample_units <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               prob_raster <span class="op">=</span> <span class="va">sampling_weight</span>,</span>
<span>               sampling_bias_strength <span class="op">=</span> <span class="va">sampling_bias_strength</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/sim_detect.html">sim_detect</a></span><span class="op">(</span><span class="op">)</span> </span>
<span>  </span>
<span>  <span class="co">#fit model to sampled data</span></span>
<span>  <span class="va">mod1</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">sim_obj</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/export_df.html">export_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">fit_mod</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#generate an independent test set</span></span>
<span>  <span class="va">test_set</span> <span class="op">&lt;-</span> <span class="va">sim_obj</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/sim_effort.html">sim_effort</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">effort_basic</span>,n_samplers <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/export_df.html">export_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># make prediction on the test set</span></span>
<span>  <span class="va">test_prediction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">mod1</span>, <span class="va">test_set</span>,type<span class="op">=</span><span class="st">"response"</span><span class="op">)</span></span>
<span>  <span class="va">test_set</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">test_set</span>,<span class="va">test_prediction</span><span class="op">)</span></span>
<span>  <span class="va">test_set</span><span class="op">$</span><span class="va">predicton_realised</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">test_set</span><span class="op">$</span><span class="va">test_prediction</span><span class="op">&gt;</span><span class="fl">0.5</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#confusion matrix</span></span>
<span>  <span class="va">conf_matrix</span> <span class="op">&lt;-</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/confusionMatrix.html" class="external-link">confusionMatrix</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">test_set</span><span class="op">$</span><span class="va">predicton_realised</span><span class="op">)</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">test_set</span><span class="op">$</span><span class="va">target_realised</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Extract confusion matrix metrics</span></span>
<span>  <span class="va">accuracy</span> <span class="op">&lt;-</span> <span class="va">conf_matrix</span><span class="op">$</span><span class="va">overall</span><span class="op">[</span><span class="st">'Accuracy'</span><span class="op">]</span></span>
<span>  <span class="va">precision</span> <span class="op">&lt;-</span> <span class="va">conf_matrix</span><span class="op">$</span><span class="va">byClass</span><span class="op">[</span><span class="st">'Pos Pred Value'</span><span class="op">]</span></span>
<span>  <span class="va">recall</span> <span class="op">&lt;-</span> <span class="va">conf_matrix</span><span class="op">$</span><span class="va">byClass</span><span class="op">[</span><span class="st">'Sensitivity'</span><span class="op">]</span></span>
<span>  <span class="va">f1_score</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="op">(</span><span class="va">precision</span> <span class="op">*</span> <span class="va">recall</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">precision</span> <span class="op">+</span> <span class="va">recall</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#results</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co">#inputs</span></span>
<span>    sampling_bias_strength <span class="op">=</span> <span class="va">sampling_bias_strength</span>,</span>
<span>    n_samplers <span class="op">=</span> <span class="va">n_samplers</span>,</span>
<span>    rep <span class="op">=</span> <span class="va">rep</span>,</span>
<span>    </span>
<span>    <span class="co">#output</span></span>
<span>    accuracy <span class="op">=</span> <span class="va">accuracy</span>,</span>
<span>    precision <span class="op">=</span> <span class="va">precision</span>,</span>
<span>    recall <span class="op">=</span> <span class="va">recall</span>,</span>
<span>    f1_score <span class="op">=</span> <span class="va">f1_score</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#test the function and time it to extrapolate how long the run time will be</span></span>
<span><span class="va">single_run_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu">run_simulation</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">500</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="st">"elapsed"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># define parameters data frame</span></span>
<span><span class="va">simulation_parameters</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>    rep <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>    sampling_bias_strength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.5</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>    n_samplers<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">50</span>,to<span class="op">=</span> <span class="fl">350</span>, by <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">#estimated run time</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Estimated run time: "</span>,<span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">single_run_time</span><span class="op">*</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">simulation_parameters</span><span class="op">)</span><span class="op">)</span>,<span class="st">" seconds"</span> <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Estimated run time: 22 seconds"</span></span>
<span></span>
<span><span class="co">#do the simulation for the required parameters and combine the rows into a data frame</span></span>
<span><span class="va">sim_outputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">simulation_parameters</span>, <span class="fl">1</span>, <span class="kw">function</span><span class="op">(</span><span class="va">row</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">run_simulation</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">row</span><span class="op">[</span><span class="st">"rep"</span><span class="op">]</span><span class="op">)</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">row</span><span class="op">[</span><span class="st">"sampling_bias_strength"</span><span class="op">]</span><span class="op">)</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">row</span><span class="op">[</span><span class="st">"n_samplers"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>By running multiple simulations with varying sampling biases and
numbers of samplers, we can gain insights into how these factors impact
the performance of our model. The results can help in understanding the
effects of sampling design on model accuracy, precision, recall, and F1
score, providing valuable information for improving sampling strategies
and model reliability.</p>
</div>
<div class="section level3">
<h3 id="plot-results">Plot results<a class="anchor" aria-label="anchor" href="#plot-results"></a>
</h3>
<p>The code below creates a visualization to show how the F1 score of a
model is influenced by the number of samples and the strength of
sampling bias:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#visualise how f1 score is impacted by the number of samples and the strength of the sampling bias</span></span>
<span><span class="va">sim_outputs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">n_samplers</span><span class="op">+</span><span class="va">sampling_bias_strength</span><span class="op">*</span><span class="fl">20</span><span class="op">-</span><span class="fl">10</span> ,</span>
<span>                           y <span class="op">=</span> <span class="va">f1_score</span>,</span>
<span>                           colour <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">sampling_bias_strength</span><span class="op">)</span>,</span>
<span>                           group <span class="op">=</span> <span class="va">sampling_bias_strength</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>se<span class="op">=</span><span class="cn">F</span>,method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">50</span>,to<span class="op">=</span> <span class="fl">400</span>, by <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"Strength of sampling bias"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Number of samples"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"F1 score"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="example_minimal_files/figure-html/plot-1.png" width="700"></p>
<p>Impact of Sample Size: The F1 score becomes more stable as the number
of samples increases. When the sample size is small, the F1 score shows
more variability.</p>
<p>Impact of Sampling Bias: Higher sampling bias tends to decrease the
F1 score, as indicated by the downward trend in the lines corresponding
to higher bias levels.</p>
<p>This visualization helps understand how the design of the sampling
process, specifically the number of samples and the extent of sampling
bias, can affect the performance of the model. Such insights are crucial
for optimizing sampling strategies to achieve more reliable and accurate
models.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Rolph.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
